# AI-Assisted Migration Prototype

Прототип сервиса на FastAPI, который принимает схему реляционной БД и помогает разложить её на домены, сравнить базовый и эвристический анализ, а также выдать черновой план миграции (сервисы, владение таблицами, план шардирования).

## Быстрый старт
- Установите зависимости: `pip install -r requirements.txt`
- Запустите сервер: `uvicorn main:app --reload`
- Откройте docs: `http://127.0.0.1:8000/docs`

## Основные эндпоинты
- `GET /health` — проверка живости.
- `POST /analysis` — принимает JSON-схему (`tables`, `relations`, `usage`), возвращает baseline и AI-разбиение, метрики и сравнение.
- `POST /suggestions` — принимает результат `/analysis` и отдаёт черновой план миграции с границами сервисов и картой владения.

## Пример запроса
```bash
curl -X POST http://127.0.0.1:8000/analysis \
  -H "Content-Type: application/json" \
  -d @app/data/example_schema.json
```

## Что внутри
- `main.py` — FastAPI приложение и роуты.
- `app/core/ai_engine.py` — графовый baseline, эвристический “AI”, метрики и сравнение, публичная функция `analyze_schema`.
- `app/utils/db_tools.py` — нормализация входной JSON-схемы.
- `app/services/migration_service.py` — генерация плана миграции на основе AI-доменов.
- `app/data/example_schema.json` — образец схемы для теста.

## Идеи для развития
- Добавить настоящую ML-модель или LLM-подсказки для разбиения.
- Парсить SQL-дампы в схему, а не только JSON.
- Улучшить метрики и визуализацию доменов.
- Покрыть API автотестами и добавить CLI утилиту для анализа.
